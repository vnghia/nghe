#TODO: enable mold for other target
[target.x86_64-unknown-linux-gnu]
rustflags = ["-C", "link-arg=-fuse-ld=mold"]

[target.'cfg(target_env = "musl")']
rustflags = ["-C", "target-feature=+crt-static"]

#TODO: support more targets after https://github.com/rust-lang/cargo/issues/10273
[env]
VCPKG_ROOT = { value = "target/vcpkg", relative = true }
PKG_CONFIG_ALLOW_CROSS = { value = "true" }

PKG_CONFIG_PATH_x86_64-unknown-linux-gnu = { value = "target/vcpkg/installed/x64-linux-release/lib/pkgconfig", relative = true }
PKG_CONFIG_PATH_aarch64-unknown-linux-gnu = { value = "target/vcpkg/installed/arm64-linux-release/lib/pkgconfig", relative = true }

PKG_CONFIG_PATH_x86_64-unknown-linux-musl = { value = "target/vcpkg/installed/x64-linux-musl-release/lib/pkgconfig", relative = true }
PKG_CONFIG_PATH_aarch64-unknown-linux-musl = { value = "target/vcpkg/installed/arm64-linux-musl-release/lib/pkgconfig", relative = true }

PKG_CONFIG_PATH_x86_64-apple-darwin = { value = "target/vcpkg/installed/x64-osx-release/lib/pkgconfig", relative = true }
PKG_CONFIG_PATH_aarch64-apple-darwin = { value = "target/vcpkg/installed/arm64-osx-release/lib/pkgconfig", relative = true }

PKG_CONFIG_PATH_x86_64-pc-windows-msvc = { value = "target/vcpkg/installed/x64-windows-release/lib/pkgconfig", relative = true }
